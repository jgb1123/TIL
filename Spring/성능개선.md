# 성능 개선
## 비동기 처리
* 특정 로직의 실행이 끝날 때까지 기다리지 않고 나머지 로직들을 순차적으로 먼저 실행하는 것을 의미한다.
* 예를 들면 외부 API에 작업을 요청하고 외부 API 서버에서 요청을 처리하는데 오랜 시간이 걸리는 경우 비동기 방식으로 처리하면 효율적이다.
### @Async
* Spring에서는 `@Async`라는 애너테이션을 통해 비동기 처리를 할 수 있도록 도와준다.
* `@Async` 애너테이션은 Spring에서 제공하는 Thread Pool을 활용하는 비동기 메소드 지원 애너테이션이다.
* 스프링 부트에서 사용하고 싶다면, Application Class에 `@EnableAsync`를 추가하고, 비동기로 동작하길 원하는 method 위에 `@Async` 애너테이션을 붙여주면 된다.
```java
@EnableAsync
@SpringBootApplication
public class AsyncTestApplication {

    public static void main(String[] args) {
        SpringApplication.run(AsyncTestApplication.class, args);
    }
}
```

```java
public class test{
    @Async
    public void testMethod(){
        ...
    }
}
```

### Custom
* 커스텀을 하지 않으면 `@Async`의 기본 설정인 `SimpleAsyncTaskExecutor`를 사용한다.
* 본인의 개발 환경에 맞게 직접 커스텀하려면 직접 `AsyncConfigurerSupport`를 상속받는 클래스를 만들면 된다.
```java
@Configuration
@EnableAsync    // 비동기 기능을 사용 가능하게 활성화
public class AsyncConfig extends AsyncConfigurerSupport {
    @Override
    public Executor getAsyncExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(10);    // 기본 실행 대기하는 Thread의 수
        executor.setMaxPoolSize(30);    // 동시 동작하는 최대 Thread의 수
        executor.setQueueCapacity(400);  // MaxPoolSize 초과 요청에서 Thread 생성 요청 시,
                                        // 해당 요청을 Queue에 저장하는데, 이 때 최대 수용 가능한 Queue의 수
        executor.setThreadNamePrefix("test-");   // 생성되는 Thread 접두사 지정
        executor.initialize();
        return executor;
    }
} 
```



___
참고

https://velog.io/@gillog/Spring-Async-Annotation%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%A9%94%EC%86%8C%EB%93%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0

https://sunghs.tistory.com/76