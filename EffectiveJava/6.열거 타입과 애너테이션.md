# 열거 타입과 애너테이션
## item34. int 상수 대신 열거 타입을 사용하라
### 정수 열거 패턴
* 열거 타입은 일정 개수의 상수 값을 정의한 후 그 외의 값은 허용하지 않는 타입이다.
* 자바에서 이 열거 타입을 지원하기 전에는 정수 상수를 한 곳에 묶어 선언해서 사용하곤 했다.

```java
public static final int APPLE_FUJI   = 0;
public static final int APPLE_PIPPIN = 1;

public static final int ORANGE_NAVEL  = 0;
public static final int ORANGE_TEMPLE = 0;
```
* 이러한 정수 열거 패턴에는 단점이 많다.
* 타입 안전을 보장할 방법이 없으며 가독성도 좋지 않다.
  * 예시에서 오렌지를 건내야 할 메서드에 사과를 보내고 `==`로 비교하더라도 컴파일러는 알 수가 없다.
* 상수의 값이 바뀌면 클라이언트도 반드시 다시 컴파일해야 한다.
* 문자열로 출력하기도 까다로운데, 그 값을 출력하거나 디버거로 확인해보면 단지 숫자로만 보여서 별 도움이 안된다.
* 열거 그룹에 속한 모든 상수를 한 바퀴 순회하는 방법도 없다.

#### 문자열 열거 패턴
* 정수 대신 문자열 상수를 사용하는 변형 패턴도 있는데, 문자열 열거 패턴이라 하는 이 방법은 더 좋지 않다.
* 상수의 의미를 출력할 수 있다는 점은 좋지만, 문자열 상수의 이룸 대신 문자열 값을 그대로 하드코딩하게 만든다.
* 이렇게 하드코딩한 문자열에 오타가 있어도 컴파일러는 확인할 수 없고, 런타임 버그가 생기게 된다.
* 문자열 비교에 따른 성능 저하도 발생한다.

### 열거 타입
* 위의 열거 패턴의 단점들을 말끔히 없애주는 것이 열거 타입이다.
* C, C++, C#과 같은 다른 언어의 열거 타입과 비슷하지만, 자바의 열거 타입은 완전한 형태의 클래스이기 때문에, 다른 언어의 열거 타입보다도 훨씬 유용하다.
* 열거 타입 자체는 클래스이며, 상수 하나당 자신의 인스턴스를 하나씩 만들어 public static final 필드로 공개한다.
* 열거 타입은 밖에서 접근할 수 있는 생성자를 제공하지 않기 때문에 사실상 final이다.
* 따라서 클라이언트가 인스턴스를 직접 생성하거나 확장할 수 없기 때문에 열거 타입 선언으로 만들어진 인스턴스들은 딱 하나씩만 존재한다는 것이 보장된다.

### 열거 타입의 장점
* 열거 타입은 컴파일타임 타입 안전성을 제공한다.
    ```java
    public enum Apple { FUJI, PIPPIN, GRANNY_SMITH }
    ```
  * Apple 열거 타입을 매개변수로 받는 메서드를 선언했다면, 건네받은 참조는 Apple의 세 가지 값 중 하나임이 확실하다. (null이 아닌경우)
  * 다른 타입의 값을 넘기려 하면 컴파일 오류가 난다.
  * 타입이 다른 열거 타입 변수에 할당하려 하거나 다른 열거 타입의 값끼리 `==`연산자로 비교하려는 것이기 때문이다.

* 열거 타입에는 각자의 이름 공간이 있어 이름이 같은 상수도 공존할 수 있다.
  * 열거 타입에 새로운 상수를 추가하거나 순서를 바꿔도 다시 컴파일하지 않아도 된다.
  * 공개되는 것이 오직 필드의 이름 뿐이며, 정수 열거 패턴과 달리 상수 값이 클라이언트로 컴파일되어 각인되지 않기 때문이다.

* 열거 타입의 toString 메서드는 출력하기에 적합한 문자열을 준다.

* 열거 타입에는 임의의 메서드나 필드를 추가할 수 있으며, 임의의 인터페이스를 구현하게 할 수도 있다.

* Object 메서드들을 수준높게 구현해놨으며, Comparable과 Serailizable을 구현했으며, 그 직렬화 형태도 웬만한 변경을 가해도 문제없이 동작하게 끔 구현해놓았다.