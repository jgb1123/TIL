# 예외
## item69. 예외는 진짜 예외 상황에만 사용하라
### 예외를 잘못 사용한 예시
```java
try {
    int i = 0;
    while(true)
        range[i++].climb();
} catch (ArrayIndexOutOfBoundsException e) {
}
```
* 위 예시는 전혀 직관적이지 않기 때문에 읽어도 무슨 코드인지 알기 어렵다.
* 위 코드는 무한 루프를 돌다가 배열의 끝에 도달해 `ArrayIndexOutOfBoundsException`이 발생하면 끝을 내는 코드인 것이다.
* 이 코드를 표준적인 관용구대로 작성했으면 훨씬 이해하기 쉬웠을 것이다.
```java
for (Mountain m : range)
    m.climb();
```
### 예외는 예외 상황에서만 사용해야 한다
* 예외는 절대로 일상적인 제어 흐름용으로 쓰여서는 안된다.
* 표준적이고 쉽게 이해되는 관용구를 사용하고, 성능 개선을 목적으로 과하게 복잡하게 만드는 기법은 자제해야 한다.
  * 실제로 성능이 좋아지더라도 자바 플랫폼이 꾸준히 개선되고 있으므로, 최적화로 얻은 상대적인 우위가 오래가지 않을 수도 있다.
  * 반면에, 과하게 복잡하게 만드는 기법에 숨겨진 미묘한 버그로 인해 어려워진 유지보수 문제는 계속 이어진다.
* 잘 설계된 API라면 클라이언트가 정상적인 제어 흐름에서 예외를 사용할 일이 없게 해야 한다.
* 특정 상태에서만 호출할 수 있는 상태 의존적 메서드를 제공하는 클래스는 상태 검사 메서드도 함께 제공해야 한다.
  * `Iterator` 인터페이스의 `next`와 `hasNext`가 각각 상태 의존적 메서드와 상태 검사 메서드에 해당한다.
  * 상태검사 메서드로 인해 간편하게 작성할 수 있는 코드들이 있다.
  ```java
  for (Iterator<Foo> i = collection.iterator(); i.hasNext(); ) {
    Foo foo = i.next();
    ...
  }
  ```

### 정리
* 예외는 예외 상황에서 쓸 의도로 설계되었다.
* 따라서 정상적인 제어 흐름에서 사용해서는 안되며, 이를 프로그래머에게 강요하는 API를 만들어서도 안된다.
