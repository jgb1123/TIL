# 일반적인 프로그래밍 원칙
## item57. 지역변수의 범위를 최소화하라
### 지역변수의 선언 위치
* 지역변수의 범위를 줄이는 가장 좋은 방법은 가장 처음에 쓰일 때 선언하는 방법이다.
* 사용하려면 아직 멀었는데 미리 선언부터 해버리면 가독성이 떨어진다.
* 실제로 사용하는 시점에서는 타입과 초깃값이 기억나지 않을 수도 있다.
* 지역변수를 생각없이 선언하다 보면 변수가 쓰이는 범위보다 너무 앞서 선언하거나, 다 쓴 뒤에도 여전히 살아 있는 경우가 많다.
* 실수로 의도한 범위 앞이나 뒤에서 그 변수를 사용하면 좋지 않은 결과로 이어질 수 있다.

### 지역변수의 초기화 시점
* 모든 지역변수는 선언과 동시에 초기화해야 한다.
* 만약 초기화에 필요한 정보가 충분하지 않다면 충분해질 때까지 선언을 미뤄야 한다.
* try-catch문은 이 규칙에서 예외이며, 변수를 초기화하는 표현식에서 검사 예외를 던질 가능성이 있으면 try 블록 안에서 초기화해야 한다.
* 변수 값을 try 블록 바깥에서도 사용해야 한다면 try 블록 앞에서 선언해야 한다.

### while문보다 for문을 사용하는 것이 좋다.
* while문보다 for문을 사용하면 지역변수 범위를 좁게 가져갈 수 있다.
* 반복 변수의 값을 반복문이 종료된 뒤에도 써야 하는 상황이 아니라면 while 문보다는 for 문을 쓰는 것이 좋다.
* 아래 두 예시에서, while문은 버그가 발생할 수 있고, for문은 컴파일 시점에서 오류를 발견할 수 있다.
```java
Iterator<Element> i = c.iterator();
while (i.hasNext()) {
    doSomething(i.next());
}
...
Iterator<Element> i2 = c2.iterator();
while (i.hasNext()) {   // 실수로 i사용으로 버그 발생 가능
    doSomethingElse(i2.next());
}
```

```java
for (Iterator<Element> i = c.tierator(); i.hasNext()) {
    Element e = i.next();
    ...
}

for (Iterator<Element> i2 = c2.tierator(); i.hasNext()) { // 컴파일 에러
Element e2 = i2.next();
    ...
}
```

* 또한 for문은 while문보다 짧기 때문에 가독성도 좋다.


### 메서드를 작게 유지하고 한 가지 기능에 집중해야 한다.
* 한 메서드에서 여러가지 기능을 처리한다면 그 중에서 한 기능과 관련된 지역변수라도 다른 기능을 수행하는 코드에서 접근할 수 있다.
* 그렇기 때문에 메서드를 기능별로 분리하면 지역변수의 범위를 최소화할 수 있다.

## item58. 전통적인 for 문보다는 for-each 문을 사용하라

### 전통적인 for문의 문제점
```java
for (int i = 0; i < a.length; i++) {
    // a[i]와 같이 사용된 로직
}
```
* 반복자와 인덱스 변수는 코드를 지저분하게만 하는 경우가 있다.
* 또한 혹시라도 잘못된 변수를 사용했을 때 컴파일러가 잡아주지도 않는다.
* 게다가 컬렉션이냐 배열이냐에 따라 코드의 형태가 상당히 달라지기 때문에 주의해야 한다.

### for-each문의 장점
```java
for (Element e : elements){
    // e를 사용한 로직
}
```
* 반복자와 인덱스 변수를 사용하지 않기 때문에 코드가 깔끔해지며 오류가 날 일도 없다.
* 컬렉션을 중첩해 순회해야 하는 경우 for-each문의 장점이 커진다.
* 가독성이 좋아지며 요소를 잘못 사용해 버그를 발생시킬 가능성이 줄어든다.

### for-each문을 사용하지 못하는 상황
* 파괴적인 필터링
    * 컬렉션을 순회하며 선택된 요소를 제거해야 한다면 반복자의 `remove` 메서드를 호출해야 한다.
    * 자바 8부터는 Collection의 removeIf 메서드를 사용해 컬렉션을 명시적으로 순회하는 일을 피할 수 있다.
* 변형
    * 리스트나 배열을 순회하면서 그 원소의 값 일부나, 혹은 전체를 교체해야 한다면 리스트의 반복자나 배열의 인덱스를 사용해야 한다.
* 병렬 반복
    * 여러 컬렉션을 병렬로 순회해야 한다면 각각의 반복자와 인덱스 변수를 사용해 엄격하고 명시적으로 제어해야 한다.

### Iterable
* for-each문은 컬렉션과 배열은 물론 `Iterable` 인터페이스를 구현한 객체라면 무엇이든 순회할 수 있다.
* `Iterable`을 처음부터 직접 구현하는것은 까다롭지만, 원소들의 묶음을 표현해야 하는 상황이라면 `Iterable`을 구현하는 쪽을 고민해봐야 한다.
* `Iterable`을 구현하면 그 타입을 사용하는 프로그래머가 for-each문을 사용할 때마다 아주 편하게 사용할 수 있다.

### 정리
* 전통적인 for 문과 비교했을 때 for-each 문은 명료하고 유연하면서 버그를 예방해준다.
* 성능 저하도 없기 때문에 사용 가능한 모든 곳에서 for문이 아닌 for-each문을 사용해야 한다.

